# 기말 프로젝트

**2020 2학기 2D 게임프로그래밍** 기말 프로젝트입니다.
Setup.exe를 이용하여 설치하여 실행하는 과정은 지인 플레이에 넣었습니다.

음성으로 설명을 많이 하고 싶었으나, 2분30초안에 내용을 다 넣기가 너무 어려워서 전반적인 흐름을 동영상으로 보여주고자 하였습니다.

흐름에 집중해주세요

# 게임의 소개

### 제목
Dance Dance Revolution Light Ver.

### 원 게임에 대한 정보
원 게임은 Dance Dance Revolution으로 콘솔 아케이드 등 여러가지 버전이 있지만, 내가 copy할 게임은 Playstation1 버전이다.
장르는 리듬게임으로 음악과 함께 아래에서 위로 올라오는 상하좌우 방향키를 타이밍에 맞게 리듬감을 느끼며 누르는 게임이다.
<img src="https://i.ytimg.com/vi/9_7El6jgX1c/hqdefault.jpg" width="40%" height="30%" title="px(픽셀) 크기 설정" alt="untitled"></img>

### 게임의 목적과 방법
우선 2D는 기본적으로 3D보다는 연출 등의 면에서 효과가 떨어진다. 그렇기 때문에 보여줄 수 있는 효과도 적은 편이다. 하지만, 리듬게임의 경우, 그나마 2D의 리소스를 살리면서 재미도 느낄 수 있는 게임이라 리듬게임을 기말 프로젝트로 만들기로 결정하였다.
근데, 나의 목적은 새로운 아이디어로 새 리듬게임을 만드는 것이 아니다. 
어릴 때 내가 재밌게 했던 게임을 성인이 된 내가 직접 구현해서 다시 즐겨보자는 목적을 가지고 있다.
게임 방법은 간단하다. 위에서 말했듯이 음악과 함께 아래에서 위로 올라오는 상하좌우 방향키를 타이밍에 맞게 누르면 된다.

# GameState (Scene) 의 수 및 각각의 이름
Scene의 수는 기본적으로는 3개로 구성하였다.
Main 화면, Game Play 화면, Score 화면 이렇게 3가지.

# 각 GameState 별 설명
### Main 화면
게임을 실행시켰을 때 처음으로 보여지는 화면이다.
화면에는 게임 제목이 쓰여진 이미지 파일과 스페이스 바를 누르면 게임이 시작된다는 문구가 쓰여진 폰트를 깜빡거리게 하고, 이어폰이나 헤드셋을 사용하는 것을 권장한다는 문구가 쓰여진 이폰트를 띄웠다. 
스페이스 바를 누르면 다음 화면으로 넘어간다.

### Game Play 화면
플레이어가 본격적으로 게임을 플레이 할 수 있는 화면이다.
화면 우측에 플레이어의 HP Bar (Miss 횟수에 따라 깎이며, Miss가 너무 많으면 게임이 종료된다.) 를 표시한다.
그 아래에 좌 방향키, 상 방향키, 하 방향키, 우 방향키 순으로 화살표 객체를 표시하다.
일정 시간에 따라 4가지 종류의 화살표 객체가 아래에서 위로 올라오게 한다.
올라오는 화살표 객체가 상단에 표시되어 있는 화살표 객체와 겹치게 될 때 플레이어가 해당하는상하좌우 방향키를 누르는 방식으로 진행된다. 
화면의 좌측 모서리 중앙에는 플레이어의 콤보 수를 띄워주고 콤보가 발생하지 않거나 miss가 발생하면 보여주지 않도록 한다. 
노래가 끝나거나 miss로 인하여 게임 오버가 되면 다음 화면으로 넘어간다.

### Score 화면
플레이어의 게임 클리어 또는 게임 오버 여부를 알려주고, 플레이어의 Max Combo 수, Miss 수, 랭크(S~F)를 보여준다.
Enter키를 누르면 다시 Main 화면으로 돌아가게 된다. (폰트를 깜빡거리게 하였다.)

### 다이어그램(약간의 수정 있음.)
![scenes](/img/Diagram.png)

# 8주간 개발 일정
### 1주차
메인 화면 개발 (음성 빼고)
### 2주차 (1곡 제대로 구현을 목표로 하여 의미가 없다고 생각하여 삭제)
곡 선택화면 개발 (음성 빼고)
### 3주차
플레이 화면 기본 HUD 구성
### 4주차
노래 선정 및 노트 설계
### 5주차 & 6주차
선정한 노래와 설계한 노트 토대로 애니메이션 구현
### 7주차 (스코어 = 랭크)
판정 삽입 & 스코어를 각각의 객체(화살표 등)과 링킹
### 8주차
메인화면과 곡 선택 화면에 음성 삽입

# game_state
스타트 화면을 띄우게 하였고, 스페이스 바를 누르면 게임 플레이 화면으로 넘어가게 하였다.

# game_state_gameplay
게임 플레이가 진행되는 게임 스테이트이다.

# ending_state
노래가 끝나거나 게임 오버가 되었을 때 나타나는 화면.
game_state_gameplay에서의 판정을 토대로 랭크, Max Combo, Miss를 보여준다.
Enter 누르면 메인으로 돌아간다.

### class Arrow
PATH에 4가지 타입의 화살표(좌 상 하 우)의 리소스를 담았다. (인덱스 값을 이용하기 위해서)
아래에서 위로 화살표가 올라오므로, y 방향으로의 값만 변화시킨다.

### arrow_generator.py
화살표를 생성시키기 위한 파일이다.

# 전반적인 코드 설명
JSON파일에 노트 타입, 나오는 타이밍, 변박, 변박이 나오는 타이밍을 담았다.
음악에 어울리게 직접 구성한 노트를 0.몇 초단위로 일일이 설정하였다.
상단에 고정되어 있는 화살표와 싱크가 맞을 때, 해당 화살표에 맞는 방향키를 누르면, 충돌체크를 하여, 이미지가 바뀐 후 사라지도록 하였고, 싱크에 맞춰 해당 방향키를 누르지 못하면,
화살표는 그냥 위로 올라가게 하였고, Miss문구가 표시되었다가 사라진다.
노트를 연속하여 타격하면 Combo를 카운트하고, 콤보가 깨지면 다시 초기화
Miss가 나면 HP Bar가 깎이고, Miss가 50번 이상되면 게임 오버 (Fail) -> 바로 ending state로.



# 전반적인 진행도
98%

# 개발 과정에서의 어려움
다른 것들은 수업 시간에 배운 걸로 충분히 구현하고 응용할 수 있었지만, 노트 설계만큼 힘들고 오래걸리는 작업 때문에 개발에 시간이 상당히 오래걸렸다.
일일이 타이밍에 맞춰 시간 뿐만 아니라 속도까지 구현한다는게.. 생각 이상으로 힘들었지만, 좋은 경험이었다.
게임이 완성되었을 때의 뿌듯함이 컸다.


# 발표 영상
### 1차
https://youtu.be/FaPcqE9lt6s
### 2차
https://youtu.be/KlsbfYzcgyQ
### 최종
https://youtu.be/I7UR1xU3wKo

